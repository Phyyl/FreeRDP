diff --git a/CMakeLists.txt b/CMakeLists.txt
index 38c35aa33..c630e3d74 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -486,7 +486,7 @@ if(WIN32)
 endif()
 
 if(IOS)
-	set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -isysroot ${CMAKE_IOS_SDK_ROOT} -g")
+	#set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -isysroot ${CMAKE_IOS_SDK_ROOT} -g")
 endif()
 
 add_definitions(-DWINPR_EXPORTS -DFREERDP_EXPORTS)
@@ -605,14 +605,13 @@ if(NOT WIN32)
 	CHECK_SYMBOL_EXISTS(pthread_mutex_timedlock pthread.h HAVE_PTHREAD_MUTEX_TIMEDLOCK_SYMBOL)
 	if (NOT HAVE_PTHREAD_MUTEX_TIMEDLOCK_SYMBOL)
 		CHECK_LIBRARY_EXISTS(pthread pthread_mutex_timedlock "" HAVE_PTHREAD_MUTEX_TIMEDLOCK_LIB)
-	endif (NOT HAVE_PTHREAD_MUTEX_TIMEDLOCK_SYMBOL)
-	if (NOT HAVE_PTHREAD_MUTEX_TIMEDLOCK_LIB)
+	endif()
+	if(NOT HAVE_PTHREAD_MUTEX_TIMEDLOCK_LIB)
 		CHECK_LIBRARY_EXISTS(pthreads pthread_mutex_timedlock "" HAVE_PTHREAD_MUTEX_TIMEDLOCK_LIBS)
-	endif (NOT HAVE_PTHREAD_MUTEX_TIMEDLOCK_LIB)
-
-	if (HAVE_PTHREAD_MUTEX_TIMEDLOCK_SYMBOL OR HAVE_PTHREAD_MUTEX_TIMEDLOCK_LIB OR HAVE_PTHREAD_MUTEX_TIMEDLOCK_LIBS)
-		set(HAVE_PTHREAD_MUTEX_TIMEDLOCK ON)
-	endif (HAVE_PTHREAD_MUTEX_TIMEDLOCK_SYMBOL OR HAVE_PTHREAD_MUTEX_TIMEDLOCK_LIB OR HAVE_PTHREAD_MUTEX_TIMEDLOCK_LIBS)
+	endif()
+	if(HAVE_PTHREAD_MUTEX_TIMEDLOCK_SYMBOL AND HAVE_PTHREAD_MUTEX_TIMEDLOCK_LIB AND HAVE_PTHREAD_MUTEX_TIMEDLOCK_LIBS)
+		set(HAVE_PTHREAD_MUTEX_TIMEDLOCK 1)
+	endif()
 endif()
 
 if(WITH_VALGRIND_MEMCHECK)
diff --git a/cmake/ConfigOptionsiOS.cmake b/cmake/ConfigOptionsiOS.cmake
index 8783789c1..78190c492 100644
--- a/cmake/ConfigOptionsiOS.cmake
+++ b/cmake/ConfigOptionsiOS.cmake
@@ -19,5 +19,7 @@ if (NOT FREERDP_IOS_EXTERNAL_SSL_PATH)
 	set(FREERDP_IOS_EXTERNAL_SSL_PATH "${CMAKE_CURRENT_SOURCE_DIR}/external/openssl")
 endif()
 mark_as_advanced(FREERDP_IOS_EXTERNAL_SSL_PATH)
-set(IOS_TARGET_SDK 9.3 CACHE STRING "Application target iOS SDK")
 
+if(NOT DEFINED IOS_TARGET_SDK)
+	set(IOS_TARGET_SDK 9.3 CACHE STRING "Application target iOS SDK")
+endif()
